import React from 'react';

interface RendererToggleProps {
  currentRenderer: 'katex' | 'mathjax';
  onToggle: () => void;
}

// KaTeX SVG Logo 组件
const KaTeXLogo: React.FC<{ isActive: boolean; height?: number }> = ({ isActive, height = 18 }) => (
  <svg 
    height={height}
    width={height / 0.34} // 保持官方比例，宽度自适应
    viewBox="0 0 1024 346" 
    style={{ 
      opacity: isActive ? 1 : 0.5,
      transition: 'opacity 0.2s ease',
      filter: isActive ? 'none' : 'grayscale(0.8)'
    }}
  >
    <g transform="translate(0,346) scale(0.1,-0.1)" fill={isActive ? "#10b981" : "#666"}>
      <path d="M0 3369 l0 -87 158 -4 c136 -3 163 -6 192 -24 l35 -20 0 -1084 0 -1084 -34 -20 c-29 -17 -58 -20 -192 -24 l-159 -5 0 -89 0 -90 45 7 c38 5 992 7 1105 2 l35 -2 3 86 3 86 -153 5 c-109 4 -165 10 -194 22 l-41 17 -7 76 c-3 42 -6 209 -6 372 l0 296 195 188 c107 103 199 187 203 187 8 -1 122 -172 459 -686 188 -287 223 -347 223 -377 0 -62 -57 -97 -157 -97 l-43 0 0 -91 0 -92 49 7 c65 8 906 9 960 0 l41 -7 0 92 0 91 -67 0 c-85 0 -187 16 -230 37 -49 23 -95 76 -187 218 l-85 130 275 3 275 2 -3 63 -3 62 -54 8 c-66 9 -130 43 -150 79 -15 25 -12 36 44 205 l60 178 334 0 334 0 69 -205 c37 -112 68 -210 68 -216 0 -21 -56 -37 -147 -42 l-93 -4 0 -64 0 -64 415 0 415 0 0 65 0 65 -80 0 c-101 0 -177 16 -190 40 -20 37 -318 929 -312 934 3 3 31 6 62 6 l57 0 12 118 c41 410 104 525 323 590 68 21 91 22 303 20 l229 -3 13 -25 c10 -20 13 -250 13 -1081 0 -993 -1 -1057 -18 -1072 -37 -33 -78 -39 -310 -45 l-233 -5 3 -86 3 -86 40 1 c144 6 1374 4 1415 -2 l50 -7 0 90 0 90 -227 5 c-227 6 -269 12 -305 45 -17 15 -18 79 -18 1084 0 957 2 1069 16 1083 13 14 48 16 222 16 114 0 234 -5 267 -10 83 -13 196 -71 239 -122 61 -71 109 -237 122 -425 l7 -93 -127 0 -126 0 0 -83 0 -84 165 -9 c142 -8 168 -12 192 -30 l28 -21 3 -1071 2 -1071 -32 -23 c-31 -21 -45 -23 -195 -27 l-163 -3 0 -89 0 -89 1114 0 c1061 0 1115 1 1120 18 7 20 74 444 108 675 l23 157 80 2 c150 3 570 -3 608 -8 l37 -6 0 91 c0 88 -1 91 -23 91 -53 0 -132 33 -169 70 -63 63 -59 76 95 311 73 112 181 279 240 370 59 91 115 173 125 182 17 16 28 1 212 -286 244 -379 360 -567 360 -583 0 -19 -102 -53 -181 -60 l-70 -7 3 -86 3 -86 35 2 c116 5 1012 4 1043 -2 l37 -7 0 89 0 90 -155 5 c-229 8 -214 -3 -398 283 -567 882 -648 1014 -636 1036 76 142 514 794 553 823 85 64 216 104 374 113 l102 6 0 86 0 86 -490 0 -490 0 0 -87 0 -88 28 0 c54 0 128 -29 165 -65 55 -54 56 -74 8 -153 -44 -73 -325 -505 -353 -543 l-17 -24 -18 23 c-22 27 -354 547 -409 640 -31 52 -35 65 -23 73 26 17 114 40 177 46 l62 6 0 86 0 86 -557 -2 -558 -2 -3 -86 -3 -85 114 0 c125 0 201 -11 259 -36 42 -19 29 0 490 -723 131 -206 237 -380 234 -387 -3 -7 -142 -224 -311 -482 -188 -290 -321 -484 -347 -507 -70 -64 -138 -89 -251 -93 -73 -3 -100 -8 -104 -18 -4 -10 -23 -14 -69 -14 l-64 0 0 -90 0 -91 51 7 c49 7 50 6 45 -17 -64 -288 -110 -394 -217 -494 -58 -54 -141 -95 -254 -127 -74 -20 -106 -22 -445 -26 -384 -4 -461 0 -485 24 -13 13 -15 87 -15 535 l0 519 193 0 c320 -1 406 -25 459 -131 30 -59 48 -150 48 -246 l0 -63 75 0 75 0 0 535 0 535 -74 0 -73 0 -6 -107 c-8 -142 -28 -206 -81 -259 -65 -65 -110 -75 -383 -81 l-233 -6 0 470 c0 434 1 472 18 491 16 20 31 21 282 27 616 15 817 -40 928 -253 56 -107 78 -191 117 -449 l7 -43 74 0 c61 0 74 3 74 16 0 23 -99 854 -105 882 l-5 22 -885 0 -885 0 0 22 c0 40 -60 762 -65 786 l-5 22 -1165 0 -1164 0 -5 -42 c-3 -24 -17 -194 -31 -378 -15 -184 -29 -354 -33 -377 -7 -40 -16 -17 -152 383 -96 283 -150 429 -162 435 -21 11 -99 11 -117 0 -13 -9 -170 -464 -467 -1356 -143 -428 -148 -441 -188 -480 -44 -43 -95 -63 -182 -72 l-52 -6 -302 453 -301 453 38 39 c21 22 182 180 358 352 352 344 379 364 540 411 51 15 130 28 183 32 l93 6 -3 84 -3 84 -443 2 -442 2 0 -87 c0 -88 0 -88 25 -88 73 0 147 -78 126 -132 -9 -23 -455 -470 -891 -893 l-235 -228 -7 54 c-8 70 -10 1087 -2 1128 11 55 45 65 232 69 l163 4 -3 85 -3 84 -593 2 -592 2 0 -86z m3079 -811 l140 -418 -290 0 c-229 0 -290 3 -287 13 3 6 68 200 144 429 76 230 142 412 145 405 4 -7 70 -200 148 -429z"/>
    </g>
  </svg>
);

// MathJax SVG Logo 组件
const MathJaxLogo: React.FC<{ isActive: boolean; height?: number }> = ({ isActive, height = 18 }) => (
  <svg 
    height={height}
    width={height / 0.187} // 保持官方比例，宽度自适应
    viewBox="0 0 1386 260" 
    style={{ 
      opacity: isActive ? 1 : 0.5,
      transition: 'opacity 0.2s ease',
      filter: isActive ? 'none' : 'grayscale(0.8)'
    }}
  >
    <g transform="translate(0,260) scale(0.1,-0.1)" fill={isActive ? "#10b981" : "#666"}>
      <path d="M6450 1320 l0 -1280 330 0 329 0 3 568 c3 541 4 568 22 597 54 84 108 116 196 116 71 1 120 -21 161 -70 62 -75 63 -81 67 -673 l3 -538 330 0 329 0 0 553 c0 687 -7 759 -96 945 -101 210 -274 314 -524 315 -173 1 -307 -49 -429 -160 l-61 -55 0 481 0 481 -330 0 -330 0 0 -1280z"/>
      <path d="M146 2448 c-5 -25 -147 -2324 -146 -2375 l0 -33 299 0 299 0 6 63 c8 92 33 687 52 1222 8 259 19 479 24 490 8 19 9 18 9 -4 2 -61 142 -716 250 -1171 67 -278 123 -515 126 -527 l5 -23 260 0 c238 0 259 1 264 18 109 366 416 1471 468 1682 l23 95 6 -490 c6 -451 20 -966 35 -1242 l6 -113 319 0 319 0 -5 78 c-9 112 -115 2253 -115 2307 l0 45 -433 0 -434 0 -103 -362 c-100 -353 -208 -772 -265 -1030 -16 -71 -32 -128 -35 -128 -3 0 -12 35 -19 78 -25 153 -94 465 -207 932 -63 261 -117 483 -120 493 -5 16 -35 17 -444 17 l-440 0 -4 -22z"/>
      <path d="M9100 1718 c0 -437 -4 -790 -10 -840 -14 -122 -42 -193 -99 -248 -69 -68 -130 -84 -285 -77 -67 3 -147 12 -179 20 -56 14 -57 14 -62 -7 -11 -48 -67 -508 -62 -512 3 -3 47 -14 98 -25 134 -29 418 -36 556 -15 207 31 344 95 464 215 91 91 156 212 193 362 41 162 46 278 46 1102 l0 777 -330 0 -330 0 0 -752z"/>
      <path d="M5463 2233 l-313 -86 0 -164 0 -163 -110 0 -110 0 0 -245 0 -245 110 0 110 0 0 -342 c0 -189 5 -383 10 -433 33 -296 164 -462 421 -532 112 -31 413 -21 537 18 l32 11 0 248 0 249 -78 -6 c-111 -8 -166 2 -207 39 -60 52 -66 92 -72 441 l-6 307 187 0 186 0 0 245 0 245 -185 0 -185 0 0 250 c0 138 -3 250 -7 249 -5 0 -149 -39 -320 -86z"/>
      <path d="M3727 1849 c-117 -10 -230 -31 -347 -65 -112 -33 -220 -83 -220 -102 0 -14 101 -393 107 -401 1 -2 33 10 70 27 279 127 628 132 703 9 37 -61 33 -63 -102 -70 -602 -32 -929 -291 -905 -716 12 -216 122 -383 312 -472 104 -49 190 -63 330 -56 170 9 279 49 392 144 l52 43 16 -75 17 -75 299 0 299 0 -6 33 c-3 17 -8 41 -11 52 -3 11 -9 268 -13 570 -7 518 -9 555 -29 635 -35 136 -83 223 -176 315 -125 126 -264 183 -494 205 -117 11 -151 11 -294 -1z m353 -1106 c0 -126 -15 -169 -75 -222 -51 -45 -93 -61 -157 -61 -105 0 -168 59 -168 157 0 31 7 71 17 90 39 82 165 133 356 142 l27 1 0 -107z"/>
      <path d="M10725 1850 c-184 -16 -371 -61 -507 -122 -37 -17 -68 -36 -68 -42 0 -17 102 -390 110 -399 3 -4 36 6 73 23 307 139 682 125 713 -27 l6 -30 -124 -6 c-344 -18 -579 -100 -737 -257 -107 -106 -157 -221 -167 -385 -11 -173 41 -319 156 -436 108 -110 225 -158 401 -166 197 -9 364 40 477 142 56 51 51 54 73 -47 l12 -58 299 0 300 0 -6 27 c-17 79 -26 310 -26 680 0 240 -5 444 -11 489 -46 331 -240 536 -564 597 -102 20 -295 28 -410 17z m345 -1110 c0 -127 -13 -164 -76 -220 -50 -44 -93 -60 -156 -60 -104 0 -168 64 -168 165 0 89 63 161 167 191 50 14 148 30 206 33 l27 1 0 -110z"/>
      <path d="M11910 1814 c0 -3 129 -198 287 -432 157 -235 286 -431 286 -437 0 -5 -127 -206 -283 -445 -155 -239 -285 -440 -287 -447 -4 -10 67 -13 354 -13 l359 0 71 158 c39 86 92 207 119 269 l48 111 37 -86 c20 -48 77 -169 128 -269 l91 -183 371 0 c318 0 370 2 366 14 -3 8 -130 216 -282 461 -151 246 -277 450 -278 455 -1 4 123 191 277 416 153 224 280 414 283 421 4 11 -61 13 -351 11 l-357 -3 -93 -200 c-51 -110 -103 -226 -116 -257 l-24 -58 -103 198 c-57 108 -118 225 -135 260 l-32 62 -368 0 c-202 0 -368 -3 -368 -6z"/>
    </g>
  </svg>
);

export const RendererToggle: React.FC<RendererToggleProps> = ({ currentRenderer, onToggle }) => {
  return (
    <div 
      className="renderer-toggle"
      style={{
        padding: '6px 12px',
        backgroundColor: '#2a2a2a',
        borderRadius: '6px',
        display: 'inline-flex',
        alignItems: 'center',
        gap: '8px',
        cursor: 'pointer',
        transition: 'all 0.2s ease',
        userSelect: 'none',
        minWidth: '100px',
        height: '36px',
        justifyContent: 'center'
      }}
      onClick={onToggle}
      title={`Switch to ${currentRenderer === 'katex' ? 'MathJax' : 'KaTeX'}`}
      onMouseEnter={(e) => {
        e.currentTarget.style.backgroundColor = '#3a3a3a';
      }}
      onMouseLeave={(e) => {
        e.currentTarget.style.backgroundColor = '#2a2a2a';
      }}
    >
      <KaTeXLogo isActive={currentRenderer === 'katex'} height={18} />
      <span 
        style={{
          color: '#666',
          fontSize: '14px',
          fontWeight: 'bold'
        }}
      >
        /
      </span>
      <MathJaxLogo isActive={currentRenderer === 'mathjax'} height={18} />
    </div>
  );
};